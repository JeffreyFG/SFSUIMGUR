<!DOCTYPE html>
<html>

        <head>
            <script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
            <script>
      
            </script>
            <title>gallery page</title>
            <link rel="stylesheet" type="text/css" href="../../stylesheets/style.css">
        </head>
        <nav>
            <a href="/login"><button id ="loginandout">login</button></a>
            <a href="/postimage"><button>Post Image</button></a>
                <a href="/registration"><button>registration</button></a>
                <a href="/gallery"><button>gallery</button></a>
                    <div class="center">
                    <img src="../../images/SFStateLogo.png" alt="Smiley face" >
                    <h1>SF State login page</h1>
                    </div> 
                    <div class="topnav">
                        <input id="searchBar" type="text" placeholder="Search..">
                        <button id = "searchButton">Search</button>
                      </div>
        </nav>       

    <body>
        <article>
            <div id="test">
                <div id="main-content" class="grid-container">
                    
                  </div>

                  <img id="main-image"> this is broken because of stuipid file paths
                  <p id="author"></p>
                  
                  <p id ="description">description:</p>

              </div>
            </article>
            


            <script>
                
                function buildMessage(msgData)
                {
                    let url = document.URL.split('/');
                    let _id = url[url.length -1];
                    let postURL = "http://localhost:3000/posts/getPostsById/" + _id;
                 fetch(postURL)
                    .then(function(data)
                    {
                        //console.log(data);
                        data.json().then(function(dataAsObject)
                        {
                            
                            document.getElementById("main-image").setAttribute("src",dataAsObject.photopath);
                            document.getElementById("author").innerHTML="the creator of this post is: "+dataAsObject.username;
                            document.getElementById("description").innerHTML="description: "+dataAsObject.description;
                        }).catch(function(err)
                        {
                            alert(err);
                            console.log(err);
                        });
                    });
                } 
                buildMessage(" ");
            </script>
    </body>
</html>